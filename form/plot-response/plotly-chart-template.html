<b-overlay :show="loading" rounded="sm">
    <b-collapse v-model="settings" v-bind:id="chart.uuid+'_settings'">
        <b-card bg-variant="light">
            <b-card-text class="text-center">{{chart.layout.title.text}} ( {{ chart.uuid }})</b-card-text>
            <b-card>
                <div class="float-right">
                    <b-button v-b-toggle="chart.uuid+'_settings'" variant="primary">Close</b-button>
                </div>
                <label class="mr-sm-2">Chart title</label>
                <input class="input" type='text' v-model="chart.layout.title.text" />
                <hr class="col-xs-12">
                <p>
                    <b-form inline>
                        <label class="mr-sm-2">X axis title</label>
                        <input class="input" type='text' v-model="chart.layout.xaxis.title.text" />
                    </b-form>
                </p>
                <b-form inline v-for="yAxis in yAxisList">
                    <label class="mr-sm-2">Y axis (<b>{{yAxis}}</b>)</label>
                    <label class="mr-sm-2">title</label>
                    <input class="input" type='text' v-model="chart.layout[yAxis].title.text" /> &nbsp;
                    <label class="mr-sm-2">Type</label>
                    <b-form-radio-group v-model="chart.layout[yAxis].type" @input="relayout(yAxis)">
                        <b-form-radio value="log">Log</b-form-radio>
                        <b-form-radio value="linear">Linear</b-form-radio>
                    </b-form-radio-group>
                </b-form>
                <hr class="col-xs-12">
                <p>
                    <b-form inline>
                        <label class="mr-sm-2">Select trace</label>
                        <select v-model="selectedTraceIndex" @change="selectTrace()">
                    <option v-for="(item, index) in chart.traces" v-bind:value="index">{{item.name}}</option>
                </select>
                    </b-form>
                </p>
                <p>
                    <b-form inline>
                        <b-button variant="primary" @click="newRandomData()">Set random data</b-button>&nbsp;
                        <b-form-datepicker v-model="newData.date"></b-form-datepicker>&nbsp;
                        <b-form-timepicker v-model="newData.time" locale="it" show-seconds></b-form-timepicker>&nbsp;
                        <b-form-input v-model="newData.value" placeholder="Enter value"></b-form-input>&nbsp;
                        <b-button variant="primary" @click="addData(chart, selectedTraceIndex)">Add data</b-button>
                    </b-form>
                </p>
                <hr class="col-xs-12">
                <p>
                    <label class="mr-sm-2">Select trace type</label>
                    <select v-model="chart.traces[selectedTraceIndex].type">
                <option value="scatter">scatter</option>
                <option value="bar">bar</option>
            </select>
                </p>
                <p>
                    <b-form inline>
                        <label class="mr-sm-2">Scatter type</label>
                        <select v-model="chart.traces[selectedTraceIndex].mode" :disabled="isBarTypeTrace">
                    <option value="lines">lines</option>
                    <option value="markers">markers</option>
                    <option value="lines+markers">lines+markers</option>
                </select> &nbsp;
                        <label class="mr-sm-2">Line type</label>
                        <select v-model="chart.traces[selectedTraceIndex].line.shape" :disabled="isBarTypeTrace || isMarkerOnlyTrace">
                    <option value="line">line</option>
                    <option value="spline">spline</option>
                    <option value="hv">hv</option>
                </select> &nbsp;
                        <label class="mr-sm-2">Line color</label>
                        <input class="input" type='color' v-model="chart.traces[selectedTraceIndex].line.color" :disabled="isBarTypeTrace || isMarkerOnlyTrace" /> &nbsp;
                        <label class="mr-sm-2">Line width</label>
                        <input class="input" type='number' min="1" max="10" v-model="chart.traces[selectedTraceIndex].line.width" :disabled="isBarTypeTrace || isMarkerOnlyTrace"></input>
                        &nbsp;
                        <label class="mr-sm-2">Marker color</label>
                        <input class="input" type='color' v-model="chart.traces[selectedTraceIndex].marker.color" :disabled="isLineOnlyTrace  && !isBarTypeTrace" /> &nbsp;
                        <label class="mr-sm-2">Marker size</label>
                        <input class="input" type='number' min="1" max="10" v-model="chart.traces[selectedTraceIndex].marker.size" :disabled="isBarTypeTrace || isLineOnlyTrace"></input>
                    </b-form>
                </p>
    </b-collapse>
    <div class="text-danger text-center">{{ tsLoadingErrorResult }}</div>
    <div class="row chart-container">
        <div :ref="chart.uuid" v-bind:id="chart.uuid" class='col-12 plotly-plot'></div>
    </div>
    <b-overlay>